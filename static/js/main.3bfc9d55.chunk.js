(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{132:function(e,t,a){e.exports={news:"News_news__9WCri"}},133:function(e,t,a){e.exports={music:"Music_music___aojt"}},134:function(e,t,a){e.exports={settings:"Settings_settings__1qASl"}},138:function(e,t,a){e.exports=a.p+"static/media/loading.29d7d247.gif"},140:function(e,t,a){e.exports=a.p+"static/media/change.7142790b.svg"},141:function(e,t,a){e.exports=a.p+"static/media/like.6bca9bc3.svg"},142:function(e,t,a){e.exports=a.p+"static/media/react.eab76719.svg"},169:function(e,t,a){e.exports=a(293)},18:function(e,t,a){e.exports={nav:"Navbar_nav__2Uaxz",nav__list:"Navbar_nav__list__2nm9O",navIsFixed:"Navbar_navIsFixed__3UeT2",note:"Navbar_note__cLlgX",item:"Navbar_item__3N5W2",active:"Navbar_active__3aFti"}},28:function(e,t,a){e.exports={pagination:"Paginator_pagination__qrPDL",pagination__items:"Paginator_pagination__items__2u5RZ",pageNumber:"Paginator_pageNumber__1_a8X",selectedPage:"Paginator_selectedPage__1u9_m",pagination__btn:"Paginator_pagination__btn__1C0BP",pagination__btn_prev:"Paginator_pagination__btn_prev__2mUFU"}},29:function(e,t,a){e.exports={header:"Header_header__1UEFA",logo:"Header_logo__2rr5R",loginBlock:"Header_loginBlock__3puX_",mainBtn:"Header_mainBtn__38YwW",loginBlock__row:"Header_loginBlock__row__1dCxa",loginBlock__name:"Header_loginBlock__name__2Ba2d"}},293:function(e,t,a){"use strict";a.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var n=a(0),r=a.n(n),o=a(67),s=a.n(o),i=a(22),l=a(23),c=a(25),u=a(24),m=a(26),f=a(73),p=a.n(f),_=a(42),d=a(27),g=a(18),E=a.n(g),h=a(11),v=a(33),b=a.n(v),w=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],o=t[1];Object(n.useEffect)((function(){window.addEventListener("scroll",(function(){var e=window.scrollY>108;window.innerWidth>991&&o(!!e)}))}),[]);var s=b()(E.a.nav__list,Object(_.a)({},E.a.navIsFixed,a));return r.a.createElement("nav",{className:E.a.nav},r.a.createElement("ul",{className:s},r.a.createElement("li",{className:E.a.item},r.a.createElement(h.b,{to:"/profile",activeClassName:E.a.active},"Profile")),r.a.createElement("li",{className:E.a.item},r.a.createElement(h.b,{to:"/dialogs",activeClassName:E.a.active},"Messages")),r.a.createElement("li",{className:E.a.item},r.a.createElement(h.b,{to:"/users",activeClassName:E.a.active},"Users"))),r.a.createElement("div",{className:E.a.note},r.a.createElement("h3",null,"\u0414\u043b\u044f \u0432\u0445\u043e\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u044d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435"),r.a.createElement("p",null,r.a.createElement("b",null,"Login:")," ",r.a.createElement("span",null,"testmyskill@mail.ru")),r.a.createElement("p",null,r.a.createElement("b",null,"Password:")," ",r.a.createElement("span",null,"test2019"))))},O=a(132),P=a.n(O),S=function(){return r.a.createElement("div",{className:P.a.news},r.a.createElement("h1",null,"NEWS"))},N=a(133),j=a.n(N),y=function(){return r.a.createElement("div",{className:j.a.music},r.a.createElement("h1",null,"Music"))},k=a(134),I=a.n(k),C=function(){return r.a.createElement("div",{className:I.a.settings},r.a.createElement("h1",null,"Settings"))},x=a(36),U=a(46),A=a(9),T={dialogs:[{id:1,name:"Kurt"},{id:2,name:"\u0412\u0438\u043a\u0442\u043e\u0440"},{id:3,name:"\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430"},{id:4,name:"\u0414\u0435\u043d\u0438\u0441"},{id:5,name:"\u0418\u043b\u044c\u044f"},{id:6,name:"\u0416\u043e\u0437\u044f"}],messages:[{id:1,message:"hello"},{id:2,message:"Hi there"},{id:3,message:"Hi youreself"},{id:4,message:"lorem dasdas dasd"},{id:5,message:"\u041a\u0430\u043a \u0442\u0432\u043e\u0438 \u0434\u0435\u043b\u0430?"},{id:6,message:"\u041f\u043e\u0448\u043b\u0438 \u043f\u0438\u0442\u044c \u043f\u0438\u0432\u0430\u043e"}]},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":var a=t.newMessageBody;return Object(A.a)({},e,{messages:[].concat(Object(U.a)(e.messages),[{id:7,message:a}])});default:return e}},B=a(35),M=a.n(B),L=function(e){var t="/dialogs/"+e.id;return r.a.createElement("div",{className:M.a.dialogItem},r.a.createElement(h.b,{to:t},e.name))},D=function(e){return r.a.createElement("div",{className:M.a.messageItem},e.message)},R=a(128),z=a(129),G=a(47),W=a(74),H=a.n(W),V=function(e){e.input;var t=e.meta,a=t.touched,n=t.error,o=e.children,s=(Object(G.a)(e,["input","meta","children"]),a&&n);return r.a.createElement("div",{className:H.a.form\u0421ontrol+" "+(s?H.a.error:" ")},r.a.createElement("div",null,o),s&&r.a.createElement("span",null,n))},X=function(e){var t=e.input,a=(e.meta,e.child,Object(G.a)(e,["input","meta","child"]));return r.a.createElement(V,e," ",r.a.createElement("textarea",Object.assign({},t,a))," ")},J=function(e){var t=e.input,a=(e.meta,e.child,Object(G.a)(e,["input","meta","child"]));return r.a.createElement(V,e," ",r.a.createElement("input",Object.assign({},t,a))," ")},Z=function(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return r.a.createElement("div",{className:H.a.formRow},r.a.createElement(R.a,Object.assign({placeholder:e,name:t,validate:a,component:n},o))," ",s)},K=function(e){if(!e)return"Field is required"},Y=function(e){return function(t){if(t.length>e)return"Max length is ".concat(e," symbols")}},Q=Y(100),q=Object(z.a)({form:"dialogAddMessageForm"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(R.a,{component:X,name:"newMessageBody",placeholder:"Enter your Message",validate:[K,Q]})),r.a.createElement("div",null,r.a.createElement("button",null,"SEND")))})),$=function(e){var t=e.dialogsPage,a=t.dialogs.map((function(e){return r.a.createElement(L,{name:e.name,id:e.id,key:e.id})})),n=t.messages.map((function(e){return r.a.createElement(D,{message:e.message,key:e.id})}));return e.isAuth?r.a.createElement("div",{className:M.a.dialogs},r.a.createElement("div",{className:M.a.dialogItems},a),r.a.createElement("div",{className:M.a.messageItems},r.a.createElement("div",null,n),r.a.createElement(q,{onSubmit:function(t){e.sendMessage(t.newMessageBody)}}))):r.a.createElement(x.a,{to:"/login"})},ee=a(10),te=function(e){return{isAuth:e.auth.isAuth}},ae=function(e){var t=function(t){function a(){return Object(i.a)(this,a),Object(c.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,t),Object(l.a)(a,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(e,this.props):r.a.createElement(x.a,{to:"/login"})}}]),a}(r.a.Component);return Object(ee.b)(te)(t)},ne=a(5),re=Object(ne.d)(Object(ee.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{sendMessage:function(t){e(function(e){return{type:"SEND_MESSAGE",newMessageBody:e}}(t))}}})),ae)($),oe=a(8),se=a.n(oe),ie=a(13),le=a(137).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"2820d7d5-5fe6-4f35-8ac3-6f294487c2ed"}}),ce={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return le.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return le.post("follow/".concat(e))},unfollow:function(e){return le.delete("follow/".concat(e))},getProfile:function(e){return console.warn("Obsolete method! use profile Api"),ue.getProfile(e)}},ue={getProfile:function(e){return le.get("profile/"+e)},getStatus:function(e){return le.get("profile/status/"+e)},updateStatus:function(e){return le.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),le.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},saveProfile:function(e){return le.put("profile",e)}},me=function(){return le.get("auth/me")},fe=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return le.post("auth/login",{email:e,password:t,rememberMe:a,captcha:n})},pe=function(){return le.delete("auth/login")},_e=function(){return le.get("security/get-captcha-url")},de=function(e,t,a,n){return e.map((function(e){return e[a]===t?Object(A.a)({},e,{},n):e}))},ge={users:[],pageSize:10,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},Ee=function(e){return{type:"FOLLOW",useId:e}},he=function(e){return{type:"UNFOLLOW",useId:e}},ve=function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},be=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},we=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},Oe=function(){var e=Object(ie.a)(se.a.mark((function e(t,a,n,r){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(we(!0,a)),e.next=3,n(a);case 3:0===e.sent.data.resultCode&&t(r(a)),t(we(!1,a));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(A.a)({},e,{users:de(e.users,t.useId,"id",{followed:!0})});case"UNFOLLOW":return Object(A.a)({},e,{users:de(e.users,t.useId,"id",{followed:!1})});case"SET_USERS":return Object(A.a)({},e,{users:t.users});case"SET_CURRENT_PAGE":return Object(A.a)({},e,{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(A.a)({},e,{totalUsersCount:t.totalCount});case"TOGGLE_IS_FETCHING":return Object(A.a)({},e,{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(A.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(U.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},Se=a(28),Ne=a.n(Se),je=a(97),ye=a.n(je),ke=function(e){for(var t=e.totalUsersCount,a=e.pageSize,o=e.onPageChanged,s=e.currentPage,i=e.portionSize,l=void 0===i?10:i,c=Math.ceil(t/a),u=[],m=1;m<=c;m++)u.push(m);var f=Math.ceil(c/l),p=Object(n.useState)(1),g=Object(d.a)(p,2),E=g[0],h=g[1],v=(E-1)*l+1,w=E*l;return r.a.createElement("div",{className:Ne.a.pagination},E>1&&r.a.createElement("button",{onClick:function(){h(E-1)},className:b()(Ne.a.pagination__btn,Ne.a.pagination__btn_prev)},r.a.createElement("img",{src:ye.a,alt:"arrow"})),r.a.createElement("div",{className:Ne.a.pagination__items},u.filter((function(e){return e>=v&&e<=w})).map((function(e){return r.a.createElement("span",{className:b()(Object(_.a)({},Ne.a.selectedPage,s===e),Ne.a.pageNumber),key:e,onClick:function(t){o(e)}},e)}))),f>E&&r.a.createElement("button",{onClick:function(){h(E+1)},className:b()(Ne.a.pagination__btn,Ne.a.pagination__btn_next)}," ",r.a.createElement("img",{src:ye.a,alt:"arrow"})," "))},Ie=a(48),Ce=a.n(Ie),xe=a(72),Ue=a.n(xe),Ae=function(e){var t=e.user,a=e.followingInProgress,n=e.unfollow,o=e.follow;return r.a.createElement("div",{className:Ce.a.usersItem},r.a.createElement("div",{className:Ce.a.usersItem__info},r.a.createElement(h.b,{to:"/profile/"+t.id},r.a.createElement("img",{src:null!=t.photos.small?t.photos.small:Ue.a,alt:""})),r.a.createElement("h3",null,t.name),t.followed?r.a.createElement("button",{disabled:a.some((function(e){return e===t.id})),onClick:function(){n(t.id)},className:b()(Ce.a.follow__btn,Ce.a.follow__btn_reverse)}," Unfollow"):r.a.createElement("button",{disabled:a.some((function(e){return e===t.id})),onClick:function(){o(t.id)},className:Ce.a.follow__btn},"Follow")))},Te=function(e){var t=e.currentPage,a=e.totalUsersCount,n=e.pageSize,o=e.onPageChanged,s=e.users,i=Object(G.a)(e,["currentPage","totalUsersCount","pageSize","onPageChanged","users"]);return r.a.createElement("div",null,r.a.createElement(ke,{currentPage:t,onPageChanged:o,totalUsersCount:a,pageSize:n}),s.map((function(e){return r.a.createElement(Ae,{user:e,followingInProgress:i.followingInProgress,key:e.id,unfollow:i.unfollow,follow:i.follow})})))},Fe=a(138),Be=a.n(Fe),Me=function(e){return r.a.createElement("div",{className:"preloader"},r.a.createElement("img",{src:Be.a,alt:"preloader"})," ")},Le=a(139),De=Object(Le.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),Re=function(e){return e.usersPage.pageSize},ze=function(e){return e.usersPage.totalUsersCount},Ge=function(e){return e.usersPage.currentPage},We=function(e){return e.usersPage.isFetching},He=function(e){return e.usersPage.followingInProgress},Ve=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onPageChanged=function(e){var t=a.props.pageSize;a.props.getUsers(e,t)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,a=e.pageSize;this.props.getUsers(t,a)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.isFetching?r.a.createElement(Me,null):null,r.a.createElement(Te,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress}))}}]),t}(r.a.Component),Xe=Object(ne.d)(ae,Object(ee.b)((function(e){return{users:De(e),pageSize:Re(e),totalUsersCount:ze(e),currentPage:Ge(e),isFetching:We(e),followingInProgress:He(e)}}),{follow:function(e){return function(){var t=Object(ie.a)(se.a.mark((function t(a){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Oe(a,e,ce.follow.bind(ce),Ee);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(ie.a)(se.a.mark((function t(a){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Oe(a,e,ce.unfollow.bind(ce),he);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:ve,toggleFollowingProgress:we,getUsers:function(e,t){return function(){var a=Object(ie.a)(se.a.mark((function a(n){var r;return se.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(be(!0)),n(ve(e)),a.next=4,ce.getUsers(e,t);case 4:r=a.sent,n(be(!1)),n({type:"SET_USERS",users:r.items}),n({type:"SET_TOTAL_USERS_COUNT",totalCount:r.totalCount});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}))(Ve),Je=a(6),Ze=a.n(Je),Ke=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],s=a[1],i=Object(n.useState)(e.status),l=Object(d.a)(i,2),c=l[0],u=l[1];Object(n.useEffect)((function(){u(e.status)}),[e.status]);var m=function(){s(!1),e.updateStatus(c)};return r.a.createElement("div",{className:Ze.a.profileStatus},e.isOwner?o?r.a.createElement("div",{className:Ze.a.profileStatus__set},r.a.createElement("input",{autoFocus:!0,onBlur:m,onChange:function(e){u(e.currentTarget.value)},value:c,onKeyPress:function(e){"Enter"===e.key&&m()}})):r.a.createElement("div",{className:Ze.a.profileStatus__get},r.a.createElement("span",{onClick:function(){s(!0)},className:Ze.a.profileStatus__current},e.status||r.a.createElement("span",{className:Ze.a.statusEmpty},"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 "))):e.status||r.a.createElement("span",{className:Ze.a.statusEmpty},"\u043d\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 "))},Ye=a(140),Qe=a.n(Ye),qe=Object(z.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,a=e.profile,n=e.error;return r.a.createElement("form",{onSubmit:t,className:Ze.a.profileForm},r.a.createElement("div",{className:Ze.a.profileForm__row},"   ",r.a.createElement("b",null,"  Full name")," ",Z("Full name","fullName",[],J)," "),r.a.createElement("div",{className:Ze.a.profileForm__row},r.a.createElement("b",null,"My skills:"),Z("My skills","lookingForAJobDescription",[],X)),r.a.createElement("div",{className:Ze.a.profileForm__row},r.a.createElement("b",null,"About me:"),Z("About me","aboutMe",[],J)),r.a.createElement("div",{className:Ze.a.profileForm__row},r.a.createElement("b",null,"Contacts"),r.a.createElement("div",{className:Ze.a.profileForm__rowInner},Object.keys(a.contacts).map((function(e){return r.a.createElement("div",{key:e,className:Ze.a.profileForm__row},r.a.createElement("b",null,e),Z(e,"contacts."+e,[],J))})))),n&&r.a.createElement("div",{className:Ze.a.formSummaryError}," ",n),r.a.createElement("button",{className:Ze.a.mainBtn},"Save"))})),$e=a(21),et={posts:[{id:1,message:"\u041f\u0440\u043e\u0434\u0430\u044e \u0441\u0432\u043e\u044e \u0432\u043e\u043b\u0433\u0443. \u041a\u043e\u043c\u0443 \u043d\u0430\u0434\u043e ?",likesCount:150},{id:2,message:"\u0411\u044b\u043b\u043e \u043a\u0440\u0443\u0442\u043e",likesCount:216},{id:3,message:"\u0417\u0440\u044f \u043f\u043e\u0448\u043b\u0438, \u043b\u0443\u0447\u0448\u0435 \u0431\u044b \u043e\u0441\u0442\u0430\u043b\u0438\u0441\u044c \u0434\u043e\u043c\u0430",likesCount:22}],profile:null,status:""},tt=function(e){return{type:"SET_STATUS",status:e}},at=function(e){return function(){var t=Object(ie.a)(se.a.mark((function t(a){var n;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce.getProfile(e);case 2:n=t.sent,a({type:"SET_USER_PROFILE",profile:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var a={id:5,message:t.newPostText,likesCount:255};return Object(A.a)({},e,{posts:[].concat(Object(U.a)(e.posts),[a]),newPostText:""});case"SET_USER_PROFILE":return Object(A.a)({},e,{profile:t.profile});case"SET_STATUS":return Object(A.a)({},e,{status:t.status});case"SAVE_PHOTO_SUCCESS":return Object(A.a)({},e,{profile:Object(A.a)({},e.profile,{photos:t.photos})});default:return e}},rt=a(49),ot=a.n(rt),st=a(58),it=a.n(st),lt=a(141),ct=a.n(lt),ut=function(e){return r.a.createElement("div",{className:it.a.post},r.a.createElement("h2",{className:it.a.postText},e.message),r.a.createElement("div",{className:it.a.post__likes},r.a.createElement("div",{className:it.a.post__like},r.a.createElement("img",{src:ct.a,alt:""}),r.a.createElement("span",null,e.like))))},mt=Y(100),ft=Object(z.a)({form:"ProfileAddNewPostForm"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit,className:ot.a.postsForm},r.a.createElement(R.a,{component:X,name:"newPostText",placeholder:"Enter your Message",validate:[K,mt]}),r.a.createElement("button",{className:ot.a.mainBtn},"Add"))})),pt=r.a.memo((function(e){var t=e.posts.map((function(e,t){return r.a.createElement(ut,{message:e.message,like:e.likesCount,key:t})}));return r.a.createElement("div",{className:ot.a.postsBlock},r.a.createElement("div",{className:ot.a.postBlock},r.a.createElement("h3",null,"\u041c\u043e\u0438 \u043f\u043e\u0441\u0442\u044b"),r.a.createElement(ft,{onSubmit:function(t){e.addPost(t.newPostText)}})),r.a.createElement("div",{className:ot.a.posts},t))})),_t=Object(ee.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",newPostText:e}}(t))}}}))(pt),dt=function(e){var t=e.profile,a=e.isOwner,n=e.goToEditMode,o=e.devider;return r.a.createElement("div",{className:Ze.a.profileInfo__get},r.a.createElement("h1",null," ",t.fullName),o,r.a.createElement("div",{className:Ze.a.profileInfo__row},r.a.createElement("span",null,"My ID:"),"   ",r.a.createElement("b",null,t.userId,"  ")),r.a.createElement("div",{className:Ze.a.profileInfo__row},r.a.createElement("span",null,"My skills:"),"   ",r.a.createElement("b",null,t.lookingForAJobDescription,"  ")),r.a.createElement("div",{className:Ze.a.profileInfo__row},r.a.createElement("span",null,"About Me"),"  ",r.a.createElement("b",null,t.aboutMe,"  ")),r.a.createElement("div",{className:Ze.a.profileInfo__contacts},r.a.createElement("b",null,"Contacts"),Object.keys(t.contacts).map((function(e){return r.a.createElement(gt,{key:e,contactTitle:e,contactValue:t.contacts[e]})}))),a&&r.a.createElement("button",{onClick:n,className:Ze.a.mainBtn},"Edit"))},gt=function(e){var t=e.contactTitle,a=e.contactValue;return r.a.createElement("div",{className:Ze.a.profileInfo__row}," ",r.a.createElement("b",null," ",t,": ")," ",r.a.createElement("a",{href:a},a)," ")},Et=function(e){var t=e.profile,a=e.status,o=e.updateStatus,s=e.isOwner,i=e.savePhoto,l=e.saveProfile,c=Object(n.useState)(!1),u=Object(d.a)(c,2),m=u[0],f=u[1];if(!t)return r.a.createElement(Me,null);var p=r.a.createElement(Ke,{status:a,updateStatus:o,isOwner:s});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ze.a.profileInfo},r.a.createElement("div",{className:Ze.a.avaBlock},r.a.createElement("img",{src:t.photos.large||Ue.a,alt:"",className:Ze.a.avaBlock__img}),s&&r.a.createElement("div",{className:Ze.a.avaBlock__panel},r.a.createElement("label",{className:Ze.a.avaBlock__label},r.a.createElement("input",{type:"file",onChange:function(e){e.target.files.length&&i(e.target.files[0])}}),r.a.createElement("img",{src:Qe.a,alt:"icon",className:Ze.a.changeAva})))),r.a.createElement("div",{className:Ze.a.profileInfo__data},m?r.a.createElement(qe,{initialValues:t,profile:t,onSubmit:function(e){l(e).then((function(){f(!1)}))}}):r.a.createElement(dt,{devider:p,profile:t,isOwner:s,goToEditMode:function(){return f(!0)}}))),s&&r.a.createElement(_t,null))},ht=function(e){return r.a.createElement("div",null,r.a.createElement(Et,{savePhoto:e.savePhoto,isOwner:e.isOwner,profile:e.profile,status:e.status,updateStatus:e.updateStatus,saveProfile:e.saveProfile}))},vt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ht,Object.assign({},this.props,{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto})))}}]),t}(r.a.Component),bt=Object(ne.d)(Object(ee.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:at,getStatus:function(e){return function(){var t=Object(ie.a)(se.a.mark((function t(a){var n;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue.getStatus(e);case 2:n=t.sent,a(tt(n.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(ie.a)(se.a.mark((function t(a){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue.updateStatus(e);case 2:0===t.sent.data.resultCode&&a(tt(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(ie.a)(se.a.mark((function t(a){var n;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue.savePhoto(e);case 2:0===(n=t.sent).data.resultCode&&a({type:"SAVE_PHOTO_SUCCESS",photos:n.data.data.photos});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(ie.a)(se.a.mark((function t(a,n){var r,o;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.userId,t.next=3,ue.saveProfile(e);case 3:if(0!==(o=t.sent).data.resultCode){t.next=8;break}a(at(r)),t.next=10;break;case 8:return a(Object($e.a)("edit-profile",{_error:o.data.messages[0]})),t.abrupt("return",Promise.reject(o.data.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}),x.g)(vt),wt=a(29),Ot=a.n(wt),Pt=a(142),St=a.n(Pt),Nt=function(e){var t=e.isAuth,a=e.login,n=e.logout;e.profile;return r.a.createElement("header",{className:Ot.a.header},r.a.createElement(h.b,{to:"/profile",className:Ot.a.logo},r.a.createElement("img",{src:St.a,alt:"Logo"})),r.a.createElement("div",{className:Ot.a.loginBlock},t?r.a.createElement("div",{className:Ot.a.loginBlock__row}," ",r.a.createElement("div",{className:Ot.a.loginBlock__name},a),"  ",r.a.createElement("button",{onClick:n,className:Ot.a.mainBtn},"Logout"),"  "):r.a.createElement("div",{className:Ot.a.loginBlock__row},r.a.createElement(h.b,{to:"/login",className:Ot.a.mainBtn},"Login")," ")))},jt={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},yt=function(e,t,a,n){return{type:"SET_USER_DATA",payload:{userId:e,email:t,login:a,isAuth:n}}},kt=function(e){return{type:"GET_CAPTCHA_SUCCESS",payload:{captchaUrl:e}}},It=function(){return function(){var e=Object(ie.a)(se.a.mark((function e(t){var a,n,r,o,s;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me();case 2:0===(a=e.sent).data.resultCode&&(n=a.data.data,r=n.id,o=n.email,s=n.login,t(yt(r,o,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ct=function(){return function(){var e=Object(ie.a)(se.a.mark((function e(t){var a,n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e();case 2:a=e.sent,n=a.data.url,t(kt(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":case"GET_CAPTCHA_SUCCESS":return Object(A.a)({},e,{},t.payload);default:return e}},Ut=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return r.a.createElement(Nt,Object.assign({},this.props,{profile:this.props.profile}))}}]),t}(r.a.Component),At=Object(ne.d)(Object(ee.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,profile:e.profilePage.profile}}),{logout:function(){return function(){var e=Object(ie.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe();case 2:0===e.sent.data.resultCode&&t(It());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getUserProfile:at}),x.g)(Ut),Tt=a(50),Ft=a.n(Tt),Bt=Object(z.a)({form:"login"})((function(e){var t=e.handleSubmit,a=e.error,n=e.captchaUrl;return r.a.createElement("form",{onSubmit:t,className:Ft.a.loginForm},Z("Email","email",[K],J,{type:"email",className:Ft.a.formInput}),Z("Password","password",[K],J,{type:"password",className:Ft.a.formInput}),n&&r.a.createElement("img",{src:n,alt:"captcha"}),n&&Z("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442","captcha",[K],J),a&&r.a.createElement("div",{className:Ft.a.formSummaryError}," ",r.a.createElement("span",null,a)," "),r.a.createElement("button",{className:Ft.a.mainBtn},"Login"))})),Mt=Object(ee.b)((function(e){return{captchaUrl:e.auth.captchaUrl,isAuth:e.auth.isAuth}}),{login:function(e,t,a,n){return function(){var r=Object(ie.a)(se.a.mark((function r(o){var s,i;return se.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fe(e,t,a,n);case 2:0===(s=r.sent).data.resultCode?o(It()):(10===s.data.resultCode&&o(Ct()),i=s.data.messages.length>0?s.data.messages[0]:"Some error",o(Object($e.a)("login",{_error:i})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){return e.isAuth?r.a.createElement(x.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement(Bt,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl}))})),Lt={initialized:!1},Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(A.a)({},e,{initialized:!0});default:return e}},Rt={},zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt;arguments.length>1&&arguments[1];return e},Gt=a(143),Wt=a(130),Ht=Object(ne.c)({profilePage:nt,dialogsPage:F,sidebar:zt,usersPage:Pe,auth:xt,form:Wt.a,app:Dt}),Vt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ne.d,Xt=Object(ne.e)(Ht,Vt(Object(ne.a)(Gt.a))),Jt=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:p.a.wrapper},r.a.createElement(At,null),r.a.createElement("main",{className:p.a.main},r.a.createElement(w,null),r.a.createElement("div",{className:p.a.content},r.a.createElement(x.d,null,r.a.createElement(x.b,{exact:!0,path:"/",render:function(){return r.a.createElement(x.a,{to:"/profile"})}}),r.a.createElement(x.b,{path:"/dialogs",render:function(){return r.a.createElement(re,null)}}),r.a.createElement(x.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(bt,null)}}),r.a.createElement(x.b,{path:"/users",render:function(){return r.a.createElement(Xe,null)}}),r.a.createElement(x.b,{path:"/news",render:function(){return r.a.createElement(S,null)}}),r.a.createElement(x.b,{path:"/music",render:function(){return r.a.createElement(y,null)}}),r.a.createElement(x.b,{path:"/settings",render:function(){return r.a.createElement(C,null)}}),r.a.createElement(x.b,{path:"/login",render:function(){return r.a.createElement(Mt,null)}}),r.a.createElement(x.b,{path:"*",render:function(){return r.a.createElement("div",null," 404")}}))))):r.a.createElement(Me,null)}}]),t}(r.a.Component),Zt=Object(ne.d)(x.g,Object(ee.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(It());Promise.all([t]).then((function(){e({type:"INITIALIZED_SUCCESS"})}))}}}))(Jt),Kt=function(e){return r.a.createElement(h.a,null,r.a.createElement(ee.a,{store:Xt},r.a.createElement(Zt,null)))};s.a.render(r.a.createElement(Kt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},35:function(e,t,a){e.exports={dialogs:"Dialogs_dialogs__5c0k_",dialogItems:"Dialogs_dialogItems__2NGfA",messageItems:"Dialogs_messageItems__3byRV",dialogItem:"Dialogs_dialogItem__13H5J"}},48:function(e,t,a){e.exports={usersItem:"Users_usersItem__1Rlh1",follow__btn:"Users_follow__btn__v5RQm",usersItem__info:"Users_usersItem__info__1TuNk",follow__btn_reverse:"Users_follow__btn_reverse__tM6gz"}},49:function(e,t,a){e.exports={postBlock:"MyPosts_postBlock__1D6Wz",posts:"MyPosts_posts__DihP1",post:"MyPosts_post__2MZXd",postsBlock:"MyPosts_postsBlock__2siE4",mainBtn:"MyPosts_mainBtn__3SSAX",postsForm:"MyPosts_postsForm__2BYuR"}},50:function(e,t,a){e.exports={formSummaryError:"Login_formSummaryError__3VuEW",mainBtn:"Login_mainBtn__2W_HX"}},58:function(e,t,a){e.exports={post:"Post_post__LJwDW",post__like:"Post_post__like__19mL5",postText:"Post_postText__2C30L"}},6:function(e,t,a){e.exports={profileInfo:"Profileinfo_profileInfo__3YFb5",avaBlock:"Profileinfo_avaBlock__bzktP",avaBlock__panel:"Profileinfo_avaBlock__panel__3IpAy",avaBlock__img:"Profileinfo_avaBlock__img__3ZTl9",avaBlock__label:"Profileinfo_avaBlock__label__3AAQ0",changeAva:"Profileinfo_changeAva__Qy_zn",profileInfo__data:"Profileinfo_profileInfo__data__A2jKG",profileInfo__get:"Profileinfo_profileInfo__get__2nyo7",profileInfo__row:"Profileinfo_profileInfo__row__3tifB",profileInfo__contacts:"Profileinfo_profileInfo__contacts__16mUE",mainBtn:"Profileinfo_mainBtn__2wwHw",profileStatus:"Profileinfo_profileStatus__3d78x",profileStatus__get:"Profileinfo_profileStatus__get__2Bl9L",profileStatus__set:"Profileinfo_profileStatus__set__NBcgc",statusEmpty:"Profileinfo_statusEmpty__l9Q4c",profileStatus__current:"Profileinfo_profileStatus__current__ol-GJ",profileForm:"Profileinfo_profileForm__3KfKt",profileForm__row:"Profileinfo_profileForm__row__kJmBc"}},72:function(e,t,a){e.exports=a.p+"static/media/user-img.1c9f98d1.png"},73:function(e,t,a){e.exports={wrapper:"App_wrapper__1XE1X",main:"App_main__3RxfA",content:"App_content__2esFZ",preloader:"App_preloader__2dbuw"}},74:function(e,t,a){e.exports={formRow:"FormsControls_formRow__31ZNA","form\u0421ontrol":"FormsControls_form\u0421ontrol__3ONZp",error:"FormsControls_error__3D5VU",formCheckbox:"FormsControls_formCheckbox__3VjUY",mainBtn:"FormsControls_mainBtn__NUUg5"}},97:function(e,t,a){e.exports=a.p+"static/media/arrow.be237328.svg"}},[[169,1,2]]]);
//# sourceMappingURL=main.3bfc9d55.chunk.js.map